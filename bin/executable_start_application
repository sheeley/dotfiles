#! /usr/bin/env fish
# set fish_trace 1

argparse 'r/restart' 'a/application=' -- $argv
set application $_flag_application
set without_app (string replace .app '' $application)

function is_running
	set running (pgrep -f $application)
	return $status
end


if is_running; and set -q _flag_restart
	# echo killing $application
	killall $without_app
	if is_running
		echo $application was not killed, you may want to restart manually
		# exit 1
	end 
end

if not is_running; and test -e /Applications/$application 
	# echo Starting $application
	open /Applications/$application
end
